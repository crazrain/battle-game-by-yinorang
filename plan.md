# 턴제 몬스터 격투 게임 개발 계획서 (로컬 2인 플레이 버전)

`격투게임.txt` 파일의 요구사항과 **하나의 PC에서 두 사람이 번갈아 플레이하는** 방식을 반영하여 수정한 게임 개발 계획서입니다.

---

## 1. 프로젝트 설정 및 핵심 시스템 (Phase 1)

이 단계에서는 게임의 기술적 토대를 마련합니다.

-   **기술 스택 결정**:
    -   **언어**: HTML, CSS, JavaScript
    -   **환경**: 웹 브라우저 기반
    -   **그래픽**: HTML5 Canvas API를 사용하여 픽셀 아트 스타일 구현
-   **프로젝트 구조 설정**:
    -   `/index.html`: 게임의 기본 HTML 파일
    -   `/css/style.css`: 게임 스타일시트
    -   `/js/main.js`: 게임의 메인 로직 및 시작점
    -   `/js/core/`: 핵심 데이터 모델 및 시스템 (GameState, Player, Monster, Skill, BattleSystem)
    -   `/assets/images/`: 몬스터 이미지, UI 요소 등 저장
-   **핵심 데이터 모델 정의**:
    -   `GameState`: 게임의 전체 상태를 관리하며, 두 명의 플레이어 정보를 포함합니다. (`players: [player1, player2]`)
    -   `Player`: 닉네임, 보유 몬스터, 경험치 등의 정보를 가집니다.
    -   `Monster`: 이미지 경로, HP, 보유 스킬 목록을 가집니다.
    -   `Skill`: 스킬 이름, 최소/최대 공격력, 레벨 정보를 가집니다.
-   **턴제 전투 시스템 구현**:
    -   **선공 결정**: 전투 시작 시, 두 플레이어 중 누가 먼저 공격할지 50% 확률로 랜덤하게 결정합니다.
    -   두 몬스터가 번갈아 가며 공격하는 턴 관리 로직을 구현합니다.
    -   스킬 사용 시 최소/최대 공격력 사이의 랜덤한 데미지를 계산하는 함수를 구현합니다.
    -   HP 감소 및 전투 종료(승/패) 판정 로직을 구현합니다.

## 2. 초기 설정 흐름 구현 (Phase 2)

두 명의 플레이어가 순차적으로 게임을 설정하는 과정을 구현합니다.

-   **데이터 존재 여부 확인**: 게임 시작 시 `localStorage`에 `player1`과 `player2`의 정보가 모두 있는지 확인합니다.
-   **플레이어 1 설정**:
    -   `player1` 정보가 없을 경우, "플레이어 1 설정"임을 명시하고 닉네임 생성, 몬스터 생성, 스킬 생성 화면을 순차적으로 표시하여 설정을 완료합니다.
-   **플레이어 2 설정**:
    -   `player1` 설정이 완료된 후, `player2` 정보가 없을 경우, "플레이어 2 설정"임을 명시하고 동일하게 닉네임, 몬스터, 스킬 생성 과정을 진행합니다.
-   **화면 구현**:
    -   **닉네임 생성 화면**: 텍스트 입력 필드와 '저장' 버튼을 제공합니다.
    -   **몬스터 생성 화면**: 이미지 파일 업로드 기능을 제공합니다.
    -   **스킬 생성 화면**: 기본 스킬 3개의 이름을 지정하고 저장합니다.

## 3. 핵심 게임 루프 구현 (Phase 3)

게임의 주된 플레이 사이클인 전투 준비 및 실행 과정을 구현합니다.

-   **전투 대기 화면 (메인 메뉴)**:
    -   두 플레이어의 설정이 모두 완료되면 진입하는 화면입니다.
    -   **플레이어 정보 표시**: 각 플레이어(1P, 2P)의 몬스터, 스킬 정보(레벨, 공격력), 보유 경험치를 명확하게 표시합니다.
    -   **플레이어 전환**: 현재 설정을 변경할 플레이어를 선택하는 UI(예: 버튼)를 제공합니다.
    -   **기능 버튼**:
        -   **몬스터 변경**: 현재 선택된 플레이어의 몬스터 생성 과정을 다시 진행하여 이미지를 교체할 수 있게 합니다.
        -   **스킬 변경**: 현재 선택된 플레이어의 스킬 생성 과정을 다시 진행하여 스킬 이름을 바꿀 수 있게 합니다.
        -   **스킬 업그레이드**: 각 스킬 옆의 '업그레이드' 버튼을 누르면, 보유 경험치를 소모하여 스킬 레벨을 올리고 공격력을 강화하는 기능을 구현합니다. (경험치 부족 시 비활성화)
        -   **전투 시작**: 모든 준비가 끝나면 전투 화면으로 전환합니다.
-   **전투 화면**:
    -   '전투 시작' 버튼 클릭 시 진입합니다.
    -   **화면 구성**:
        -   좌측 상단: 플레이어 1 HP 바
        -   우측 상단: 플레이어 2 HP 바
        -   중앙: **전투 상황을 알려주는 메시지 로그 영역**
        -   좌측 하단: 플레이어 1 스킬 버튼 3개
        -   우측 하단: 플레이어 2 스킬 버튼 3개
    -   **전투 로직 연동**:
        -   공격이 발생할 때마다 중앙 메시지 로그에 데미지 수치와 함께 상황을 텍스트로 표시합니다. (예: '플레이어 1이(가) 스킬1(으)로 5의 데미지를 입혔다!')
-   **전투 후 처리**:
    -   전투 종료 시 승/패 여부를 표시합니다.
    -   승리한 플레이어에게 많은 경험치를, 패배한 플레이어에게 적은 경험치를 지급하고 `localStorage`에 저장합니다.
    -   플레이어를 전투 대기 화면으로 돌려보냅니다.

## 4. UI/UX 구현 (Phase 4)

모든 게임 화면을 픽셀 아트 컨셉에 맞게 시각적으로 구현합니다.

-   **시작 화면**: 게임 제목과 '시작하기' 버튼이 포함된 초기 화면을 디자인합니다.
-   **통일된 UI 디자인**: 모든 화면과 **전투 메시지 로그**에 일관된 pixel art 스타일의 UI 요소를 적용합니다.
-   **반응형 레이아웃**: 다양한 화면 크기에서도 게임이 잘 보이도록 기본적인 반응형 스타일을 적용합니다.

## 5. 데이터 저장 (Phase 5)

두 플레이어의 데이터를 영구적으로 보관하는 기능을 구현합니다.

-   **저장**: 정보가 변경될 때마다, 두 플레이어의 정보가 모두 담긴 `gameState` 객체를 `localStorage`에 JSON 문자열 형태로 저장합니다.
-   **불러오기**: 게임 시작 시 `localStorage`에서 `gameState`를 불러와 게임 상태를 복원합니다. 데이터가 부족할 경우, 해당 플레이어의 초기 설정 흐름으로 유도합니다.

## 6. 향후 개선 사항 (Phase 6)

기본 기능 구현 후 게임을 더 발전시키기 위한 아이디어입니다.

-   **애니메이션 및 사운드**:
    -   스킬 사용 시 간단한 픽셀 애니메이션 효과를 추가합니다.
    -   **데미지 텍스트에 플로팅 애니메이션 효과**를 추가하여 시각적 피드백을 강화합니다.
    -   공격, 피격, 승리/패배 시 효과음을 추가합니다.
-   **콘텐츠 확장**:
    -   다양한 종류의 몬스터와 스킬을 추가하여 전략의 폭을 넓힙니다.
-   **외형 변경 기능**:
    -   `격투게임.txt`에 언급된 '외형 변경' 기능을 구체화하여, 몬스터의 색상을 바꾸거나 액세서리를 추가하는 등의 꾸미기 요소를 구현합니다.

---

## 최근 업데이트

*   **HP 업그레이드, CSS 수정, localStorage 연동 완료**: HP 업그레이드 기능이 추가되었고, CSS 스타일이 수정되었으며, localStorage 연동이 완료되었습니다.
*   **게임 진행 데이터 안정성 강화**: 전투를 통해 획득한 경험치 및 기타 게임 진행 데이터(승리 횟수, 연승 등)가 게임 종료 후에도 `localStorage`에 정상적으로 저장되고 다음 게임 시작 시 불러와지도록 데이터 저장 및 로드 로직이 개선되었습니다.
*   **스킬 시스템 개선**: 스킬 레벨업에 필요한 경험치 계산 방식이 조정되었으며, 스킬 업그레이드 버튼이 정상적으로 작동하도록 사용자 인터페이스의 클릭 인식 및 이벤트 처리 로직이 안정화되었습니다. 스킬 사용 시 사운드 효과가 추가되었고, 스킬 정보(레벨, 공격력)가 전투 준비 화면에 올바르게 표시되도록 개선되었습니다.
*   **전투 및 UI 피드백 강화**: 턴 기반 전투 시스템의 사용자 인터페이스가 개선되었으며, 공격 시 애니메이션 효과가 추가되었습니다. 몬스터에게 데미지를 입혔을 때 데미지 수치가 시각적으로 표시되는 기능이 추가되어 전투의 몰입감을 높였습니다.
*   **사용자 설정 유연성 증대**: 플레이어 닉네임 변경 기능이 추가되어 사용자가 자신의 플레이어 이름을 자유롭게 설정할 수 있게 되었습니다. 몬스터 이미지 변경 기능이 추가되어 플레이어가 자신의 몬스터 외형을 선택할 수 있게 되었습니다.
*   **초기 설정 및 사용자 경험 개선**: 게임 시작 시 닉네임, 몬스터, 스킬 설정 등 초기 설정 흐름이 개선되었습니다. 경험치 초기화 기능이 추가되어 게임 상태를 쉽게 리셋할 수 있게 되었습니다. 경고/확인 메시지가 모달 창으로 표시되도록 개선되어 사용자에게 더 명확한 피드백을 제공합니다.